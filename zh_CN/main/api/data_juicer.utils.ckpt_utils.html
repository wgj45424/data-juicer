
<!DOCTYPE html>


<html lang="zh-CN" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>data_juicer.utils.ckpt_utils module &#8212; Data Juicer</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=34d13042" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=91bfbbb6"></script>
    <script src="../_static/doctools.js?v=fd6eb6e6"></script>
    <script src="../_static/sphinx_highlight.js?v=6ffebe34"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/translations.js?v=540d3cec"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'api/data_juicer.utils.ckpt_utils';</script>
    <script src="../_static/sidebar.js?v=3fc1065c"></script>
    <script src="../_static/switcher-mobile.js?v=07875724"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link rel="icon" href="../_static/icon.png"/>
    <link rel="index" title="ç´¢å¼•" href="../genindex.html" />
    <link rel="search" title="æœç´¢" href="../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="zh-CN"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">è·³è½¬è‡³ä¸»è¦å†…å®¹</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>å›åˆ°é¡¶éƒ¨</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search docs..."
         aria-label="Search docs..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="ç‰ˆæœ¬è­¦å‘Š"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="ç½‘é¡µå¯¼èˆª">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index_ZH.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/icon.png" class="logo__image only-light" alt=""/>
    <img src="../_static/icon.png" class="logo__image only-dark pst-js-only" alt=""/>
  
  
    <p class="title logo__title">Data Juicer</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../docs_index_ZH.html">
    æ–‡æ¡£
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../api.html">
    API
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://datajuicer.github.io/data-juicer-sandbox/zh_CN/main/">
    Sandbox
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://datajuicer.github.io/data-juicer-hub/zh_CN/main/">
    Hub
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://datajuicer.github.io/data-juicer-agents/zh_CN/main/">
    Agents
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="æœç´¢" aria-label="æœç´¢" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
        </div>
      
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/wgj45424/data-juicer" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="äº®è‰²"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="æš—è‰²"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><div class="navbar-switcher-container">
  
  <div class="navbar-dropdown language-dropdown">
    <button type="button" 
            class="navbar-dropdown-trigger" 
            aria-haspopup="true"
            aria-expanded="false"
            aria-label="Select language: zh-CN">
      <span class="switcher-icon" aria-hidden="true">ğŸŒ</span>
      <span class="switcher-text">zh-CN</span>
      <i class="fa-solid fa-chevron-down dropdown-icon" aria-hidden="true"></i>
    </button>
    <div class="navbar-dropdown-panel" role="menu">
      <div class="dropdown-content">
        
          
          
          <a href="../../../en/main/api/data_juicer.utils.ckpt_utils.html"
             class="dropdown-item "
             role="menuitem"
             >
            English
          </a>
        
          
          
          <a href="../../../zh_CN/main/api/data_juicer.utils.ckpt_utils.html"
             class="dropdown-item active"
             role="menuitem"
             aria-current="true">
            ç®€ä½“ä¸­æ–‡
          </a>
        
      </div>
    </div>
  </div>
  

  
  <div class="navbar-dropdown version-dropdown">
    <button type="button" 
            class="navbar-dropdown-trigger" 
            aria-haspopup="true"
            aria-expanded="false"
            aria-label="Select version: main">
      <span class="switcher-icon" aria-hidden="true">ğŸ“¦</span>
      <span class="switcher-text">main</span>
      <i class="fa-solid fa-chevron-down dropdown-icon" aria-hidden="true"></i>
    </button>
    <div class="navbar-dropdown-panel" role="menu">
      <div class="dropdown-content">
        
        <a href="../../main/api/data_juicer.utils.ckpt_utils.html"
           class="dropdown-item active"
           role="menuitem"
           aria-current="true">
          main
        </a>
        
      </div>
    </div>
  </div>
  
</div></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="æœç´¢" aria-label="æœç´¢" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="å½“å‰é¡µé¢">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar hide-on-wide">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../docs_index_ZH.html">
    æ–‡æ¡£
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../api.html">
    API
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://datajuicer.github.io/data-juicer-sandbox/zh_CN/main/">
    Sandbox
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://datajuicer.github.io/data-juicer-hub/zh_CN/main/">
    Hub
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://datajuicer.github.io/data-juicer-agents/zh_CN/main/">
    Agents
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/wgj45424/data-juicer" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="äº®è‰²"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="æš—è‰²"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><div class="navbar-switcher-container">
  
  <div class="navbar-dropdown language-dropdown">
    <button type="button" 
            class="navbar-dropdown-trigger" 
            aria-haspopup="true"
            aria-expanded="false"
            aria-label="Select language: zh-CN">
      <span class="switcher-icon" aria-hidden="true">ğŸŒ</span>
      <span class="switcher-text">zh-CN</span>
      <i class="fa-solid fa-chevron-down dropdown-icon" aria-hidden="true"></i>
    </button>
    <div class="navbar-dropdown-panel" role="menu">
      <div class="dropdown-content">
        
          
          
          <a href="../../../en/main/api/data_juicer.utils.ckpt_utils.html"
             class="dropdown-item "
             role="menuitem"
             >
            English
          </a>
        
          
          
          <a href="../../../zh_CN/main/api/data_juicer.utils.ckpt_utils.html"
             class="dropdown-item active"
             role="menuitem"
             aria-current="true">
            ç®€ä½“ä¸­æ–‡
          </a>
        
      </div>
    </div>
  </div>
  

  
  <div class="navbar-dropdown version-dropdown">
    <button type="button" 
            class="navbar-dropdown-trigger" 
            aria-haspopup="true"
            aria-expanded="false"
            aria-label="Select version: main">
      <span class="switcher-icon" aria-hidden="true">ğŸ“¦</span>
      <span class="switcher-text">main</span>
      <i class="fa-solid fa-chevron-down dropdown-icon" aria-hidden="true"></i>
    </button>
    <div class="navbar-dropdown-panel" role="menu">
      <div class="dropdown-content">
        
        <a href="../../main/api/data_juicer.utils.ckpt_utils.html"
           class="dropdown-item active"
           role="menuitem"
           aria-current="true">
          main
        </a>
        
      </div>
    </div>
  </div>
  
</div></div>
        
      </div>
    
  </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index_ZH.html" class="nav-link" aria-label="åˆå§‹é¡µé¢">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">data_juicer.utils.ckpt_utils module</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="module-data_juicer.utils.ckpt_utils">
<span id="data-juicer-utils-ckpt-utils-module"></span><h1>data_juicer.utils.ckpt_utils module<a class="headerlink" href="#module-data_juicer.utils.ckpt_utils" title="é“¾æ¥åˆ°æ­¤æ ‡é¢˜ã€‚">#</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="data_juicer.utils.ckpt_utils.CheckpointManagerBase">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">data_juicer.utils.ckpt_utils.</span></span><span class="sig-name descname"><span class="pre">CheckpointManagerBase</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ckpt_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/data_juicer/utils/ckpt_utils.html#CheckpointManagerBase"><span class="viewcode-link"><span class="pre">[æºä»£ç ]</span></span></a><a class="headerlink" href="#data_juicer.utils.ckpt_utils.CheckpointManagerBase" title="é“¾æ¥åˆ°æ­¤å®šä¹‰ã€‚">#</a></dt>
<dd><p>åŸºç±»ï¼š<code class="xref py py-class docutils literal notranslate"><span class="pre">ABC</span></code></p>
<p>Base class for checkpoint managers.</p>
<p>Provides common functionality for managing checkpoint directories and
defines the interface that checkpoint managers should implement.</p>
<dl class="py method">
<dt class="sig sig-object py" id="data_juicer.utils.ckpt_utils.CheckpointManagerBase.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ckpt_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/data_juicer/utils/ckpt_utils.html#CheckpointManagerBase.__init__"><span class="viewcode-link"><span class="pre">[æºä»£ç ]</span></span></a><a class="headerlink" href="#data_juicer.utils.ckpt_utils.CheckpointManagerBase.__init__" title="é“¾æ¥åˆ°æ­¤å®šä¹‰ã€‚">#</a></dt>
<dd><p>Initialize base checkpoint manager.</p>
<dl class="field-list simple">
<dt class="field-odd">å‚æ•°<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ckpt_dir</strong> -- Directory to save and load checkpoints</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_juicer.utils.ckpt_utils.CheckpointManagerBase.save_checkpoint">
<span class="property"><span class="k"><span class="pre">abstractmethod</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">save_checkpoint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="../_modules/data_juicer/utils/ckpt_utils.html#CheckpointManagerBase.save_checkpoint"><span class="viewcode-link"><span class="pre">[æºä»£ç ]</span></span></a><a class="headerlink" href="#data_juicer.utils.ckpt_utils.CheckpointManagerBase.save_checkpoint" title="é“¾æ¥åˆ°æ­¤å®šä¹‰ã€‚">#</a></dt>
<dd><p>Save a dataset checkpoint.</p>
<dl class="field-list simple">
<dt class="field-odd">å‚æ•°<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataset</strong> -- Dataset to save</p></li>
<li><p><strong>kwargs</strong> -- Additional arguments specific to the implementation</p></li>
</ul>
</dd>
<dt class="field-even">è¿”å›<span class="colon">:</span></dt>
<dd class="field-even"><p>Path to saved checkpoint</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_juicer.utils.ckpt_utils.CheckpointManagerBase.load_checkpoint">
<span class="property"><span class="k"><span class="pre">abstractmethod</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">load_checkpoint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/data_juicer/utils/ckpt_utils.html#CheckpointManagerBase.load_checkpoint"><span class="viewcode-link"><span class="pre">[æºä»£ç ]</span></span></a><a class="headerlink" href="#data_juicer.utils.ckpt_utils.CheckpointManagerBase.load_checkpoint" title="é“¾æ¥åˆ°æ­¤å®šä¹‰ã€‚">#</a></dt>
<dd><p>Load a dataset checkpoint.</p>
<dl class="field-list simple">
<dt class="field-odd">å‚æ•°<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>kwargs</strong> -- Arguments specific to the implementation (e.g., op_idx, partition_id)</p>
</dd>
<dt class="field-even">è¿”å›<span class="colon">:</span></dt>
<dd class="field-even"><p>Loaded dataset or None if checkpoint doesn't exist</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_juicer.utils.ckpt_utils.CheckpointManagerBase.checkpoint_exists">
<span class="sig-name descname"><span class="pre">checkpoint_exists</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">checkpoint_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="../_modules/data_juicer/utils/ckpt_utils.html#CheckpointManagerBase.checkpoint_exists"><span class="viewcode-link"><span class="pre">[æºä»£ç ]</span></span></a><a class="headerlink" href="#data_juicer.utils.ckpt_utils.CheckpointManagerBase.checkpoint_exists" title="é“¾æ¥åˆ°æ­¤å®šä¹‰ã€‚">#</a></dt>
<dd><p>Check if a checkpoint file/directory exists.</p>
<dl class="field-list simple">
<dt class="field-odd">å‚æ•°<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>checkpoint_path</strong> -- Path to checkpoint</p>
</dd>
<dt class="field-even">è¿”å›<span class="colon">:</span></dt>
<dd class="field-even"><p>True if checkpoint exists, False otherwise</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="data_juicer.utils.ckpt_utils.CheckpointManager">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">data_juicer.utils.ckpt_utils.</span></span><span class="sig-name descname"><span class="pre">CheckpointManager</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ckpt_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">original_process_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_proc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/data_juicer/utils/ckpt_utils.html#CheckpointManager"><span class="viewcode-link"><span class="pre">[æºä»£ç ]</span></span></a><a class="headerlink" href="#data_juicer.utils.ckpt_utils.CheckpointManager" title="é“¾æ¥åˆ°æ­¤å®šä¹‰ã€‚">#</a></dt>
<dd><p>åŸºç±»ï¼š<a class="reference internal" href="#data_juicer.utils.ckpt_utils.CheckpointManagerBase" title="data_juicer.utils.ckpt_utils.CheckpointManagerBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">CheckpointManagerBase</span></code></a></p>
<p>This class is used to save the latest version of dataset to checkpoint
directory or load it from checkpoint directory, a bit like cache management
Rerun the same config will reload the checkpoint and skip ops before it.</p>
<p>If any args of operator in process list is changed, all ops will be
rerun from the beginning.</p>
<dl class="py method">
<dt class="sig sig-object py" id="data_juicer.utils.ckpt_utils.CheckpointManager.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ckpt_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">original_process_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_proc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/data_juicer/utils/ckpt_utils.html#CheckpointManager.__init__"><span class="viewcode-link"><span class="pre">[æºä»£ç ]</span></span></a><a class="headerlink" href="#data_juicer.utils.ckpt_utils.CheckpointManager.__init__" title="é“¾æ¥åˆ°æ­¤å®šä¹‰ã€‚">#</a></dt>
<dd><p>Initialization method.</p>
<dl class="field-list simple">
<dt class="field-odd">å‚æ•°<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ckpt_dir</strong> -- path to save and load checkpoint</p></li>
<li><p><strong>original_process_list</strong> -- process list in config</p></li>
<li><p><strong>num_proc</strong> -- number of process workers when saving dataset</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_juicer.utils.ckpt_utils.CheckpointManager.get_left_process_list">
<span class="sig-name descname"><span class="pre">get_left_process_list</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/data_juicer/utils/ckpt_utils.html#CheckpointManager.get_left_process_list"><span class="viewcode-link"><span class="pre">[æºä»£ç ]</span></span></a><a class="headerlink" href="#data_juicer.utils.ckpt_utils.CheckpointManager.get_left_process_list" title="é“¾æ¥åˆ°æ­¤å®šä¹‰ã€‚">#</a></dt>
<dd><p>Get left process list of ops for processing dataset, when checkpoint is
available, remove some ops from process list, otherwise keep it
unchanged.</p>
<dl class="field-list simple">
<dt class="field-odd">è¿”å›<span class="colon">:</span></dt>
<dd class="field-odd"><p>process list of left ops</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_juicer.utils.ckpt_utils.CheckpointManager.check_ckpt">
<span class="sig-name descname"><span class="pre">check_ckpt</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/data_juicer/utils/ckpt_utils.html#CheckpointManager.check_ckpt"><span class="viewcode-link"><span class="pre">[æºä»£ç ]</span></span></a><a class="headerlink" href="#data_juicer.utils.ckpt_utils.CheckpointManager.check_ckpt" title="é“¾æ¥åˆ°æ­¤å®šä¹‰ã€‚">#</a></dt>
<dd><p>Check if checkpoint is available.</p>
<dl class="field-list simple">
<dt class="field-odd">è¿”å›<span class="colon">:</span></dt>
<dd class="field-odd"><p>True when checkpoint is available, else False</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_juicer.utils.ckpt_utils.CheckpointManager.record">
<span class="sig-name descname"><span class="pre">record</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">op_cfg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/data_juicer/utils/ckpt_utils.html#CheckpointManager.record"><span class="viewcode-link"><span class="pre">[æºä»£ç ]</span></span></a><a class="headerlink" href="#data_juicer.utils.ckpt_utils.CheckpointManager.record" title="é“¾æ¥åˆ°æ­¤å®šä¹‰ã€‚">#</a></dt>
<dd><p>Save op name and args to op record, which is used to compare with
the process list from config to decide if a checkpoint is available.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_juicer.utils.ckpt_utils.CheckpointManager.check_ops_to_skip">
<span class="sig-name descname"><span class="pre">check_ops_to_skip</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/data_juicer/utils/ckpt_utils.html#CheckpointManager.check_ops_to_skip"><span class="viewcode-link"><span class="pre">[æºä»£ç ]</span></span></a><a class="headerlink" href="#data_juicer.utils.ckpt_utils.CheckpointManager.check_ops_to_skip" title="é“¾æ¥åˆ°æ­¤å®šä¹‰ã€‚">#</a></dt>
<dd><p>Check which ops need to be skipped in the process list.</p>
<p>If op record list from checkpoint are the same as the prefix
part of process list, then skip these ops and start processing
from the checkpoint. Otherwise, process the original dataset
from scratch.</p>
<dl class="field-list simple">
<dt class="field-odd">è¿”å›<span class="colon">:</span></dt>
<dd class="field-odd"><p>whether to skip some ops or not</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_juicer.utils.ckpt_utils.CheckpointManager.save_ckpt">
<span class="sig-name descname"><span class="pre">save_ckpt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ds</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/data_juicer/utils/ckpt_utils.html#CheckpointManager.save_ckpt"><span class="viewcode-link"><span class="pre">[æºä»£ç ]</span></span></a><a class="headerlink" href="#data_juicer.utils.ckpt_utils.CheckpointManager.save_ckpt" title="é“¾æ¥åˆ°æ­¤å®šä¹‰ã€‚">#</a></dt>
<dd><p>Save dataset to checkpoint directory and dump processed ops list.
Alias for save_checkpoint for backward compatibility.</p>
<dl class="field-list simple">
<dt class="field-odd">å‚æ•°<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ds</strong> -- input dataset to save</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_juicer.utils.ckpt_utils.CheckpointManager.save_checkpoint">
<span class="sig-name descname"><span class="pre">save_checkpoint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ds</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/data_juicer/utils/ckpt_utils.html#CheckpointManager.save_checkpoint"><span class="viewcode-link"><span class="pre">[æºä»£ç ]</span></span></a><a class="headerlink" href="#data_juicer.utils.ckpt_utils.CheckpointManager.save_checkpoint" title="é“¾æ¥åˆ°æ­¤å®šä¹‰ã€‚">#</a></dt>
<dd><p>Save dataset to checkpoint directory and dump processed ops list.</p>
<dl class="field-list simple">
<dt class="field-odd">å‚æ•°<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ds</strong> -- input dataset to save</p></li>
<li><p><strong>kwargs</strong> -- Additional arguments (not used, kept for interface compatibility)</p></li>
</ul>
</dd>
<dt class="field-even">è¿”å›<span class="colon">:</span></dt>
<dd class="field-even"><p>Path to checkpoint directory</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_juicer.utils.ckpt_utils.CheckpointManager.load_ckpt">
<span class="sig-name descname"><span class="pre">load_ckpt</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/data_juicer/utils/ckpt_utils.html#CheckpointManager.load_ckpt"><span class="viewcode-link"><span class="pre">[æºä»£ç ]</span></span></a><a class="headerlink" href="#data_juicer.utils.ckpt_utils.CheckpointManager.load_ckpt" title="é“¾æ¥åˆ°æ­¤å®šä¹‰ã€‚">#</a></dt>
<dd><p>Load dataset from a checkpoint file.
Alias for load_checkpoint for backward compatibility.</p>
<dl class="field-list simple">
<dt class="field-odd">è¿”å›<span class="colon">:</span></dt>
<dd class="field-odd"><p>a dataset stored in checkpoint file.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_juicer.utils.ckpt_utils.CheckpointManager.load_checkpoint">
<span class="sig-name descname"><span class="pre">load_checkpoint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/data_juicer/utils/ckpt_utils.html#CheckpointManager.load_checkpoint"><span class="viewcode-link"><span class="pre">[æºä»£ç ]</span></span></a><a class="headerlink" href="#data_juicer.utils.ckpt_utils.CheckpointManager.load_checkpoint" title="é“¾æ¥åˆ°æ­¤å®šä¹‰ã€‚">#</a></dt>
<dd><p>Load dataset from a checkpoint file.</p>
<dl class="field-list simple">
<dt class="field-odd">å‚æ•°<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>kwargs</strong> -- Additional arguments (not used, kept for interface compatibility)</p>
</dd>
<dt class="field-even">è¿”å›<span class="colon">:</span></dt>
<dd class="field-even"><p>a dataset stored in checkpoint file.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="data_juicer.utils.ckpt_utils.CheckpointStrategy">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">data_juicer.utils.ckpt_utils.</span></span><span class="sig-name descname"><span class="pre">CheckpointStrategy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/data_juicer/utils/ckpt_utils.html#CheckpointStrategy"><span class="viewcode-link"><span class="pre">[æºä»£ç ]</span></span></a><a class="headerlink" href="#data_juicer.utils.ckpt_utils.CheckpointStrategy" title="é“¾æ¥åˆ°æ­¤å®šä¹‰ã€‚">#</a></dt>
<dd><p>åŸºç±»ï¼š<code class="xref py py-class docutils literal notranslate"><span class="pre">Enum</span></code></p>
<p>Checkpoint strategies for controlling when to create checkpoints.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="data_juicer.utils.ckpt_utils.CheckpointStrategy.EVERY_OP">
<span class="sig-name descname"><span class="pre">EVERY_OP</span></span><span class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'every_op'</span></span><a class="headerlink" href="#data_juicer.utils.ckpt_utils.CheckpointStrategy.EVERY_OP" title="é“¾æ¥åˆ°æ­¤å®šä¹‰ã€‚">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="data_juicer.utils.ckpt_utils.CheckpointStrategy.EVERY_N_OPS">
<span class="sig-name descname"><span class="pre">EVERY_N_OPS</span></span><span class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'every_n_ops'</span></span><a class="headerlink" href="#data_juicer.utils.ckpt_utils.CheckpointStrategy.EVERY_N_OPS" title="é“¾æ¥åˆ°æ­¤å®šä¹‰ã€‚">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="data_juicer.utils.ckpt_utils.CheckpointStrategy.MANUAL">
<span class="sig-name descname"><span class="pre">MANUAL</span></span><span class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'manual'</span></span><a class="headerlink" href="#data_juicer.utils.ckpt_utils.CheckpointStrategy.MANUAL" title="é“¾æ¥åˆ°æ­¤å®šä¹‰ã€‚">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="data_juicer.utils.ckpt_utils.CheckpointStrategy.DISABLED">
<span class="sig-name descname"><span class="pre">DISABLED</span></span><span class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'disabled'</span></span><a class="headerlink" href="#data_juicer.utils.ckpt_utils.CheckpointStrategy.DISABLED" title="é“¾æ¥åˆ°æ­¤å®šä¹‰ã€‚">#</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="data_juicer.utils.ckpt_utils.RayCheckpointManager">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">data_juicer.utils.ckpt_utils.</span></span><span class="sig-name descname"><span class="pre">RayCheckpointManager</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ckpt_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">checkpoint_enabled</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">checkpoint_strategy</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#data_juicer.utils.ckpt_utils.CheckpointStrategy" title="data_juicer.utils.ckpt_utils.CheckpointStrategy"><span class="pre">CheckpointStrategy</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">CheckpointStrategy.EVERY_OP</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">checkpoint_n_ops</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">checkpoint_op_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/data_juicer/utils/ckpt_utils.html#RayCheckpointManager"><span class="viewcode-link"><span class="pre">[æºä»£ç ]</span></span></a><a class="headerlink" href="#data_juicer.utils.ckpt_utils.RayCheckpointManager" title="é“¾æ¥åˆ°æ­¤å®šä¹‰ã€‚">#</a></dt>
<dd><p>åŸºç±»ï¼š<a class="reference internal" href="#data_juicer.utils.ckpt_utils.CheckpointManagerBase" title="data_juicer.utils.ckpt_utils.CheckpointManagerBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">CheckpointManagerBase</span></code></a></p>
<p>Checkpoint manager for Ray Data with per-partition checkpointing support.</p>
<p>This class manages checkpoints for Ray Data datasets using Parquet format,
supporting per-partition checkpointing and various checkpoint strategies.</p>
<dl class="py method">
<dt class="sig sig-object py" id="data_juicer.utils.ckpt_utils.RayCheckpointManager.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ckpt_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">checkpoint_enabled</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">checkpoint_strategy</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#data_juicer.utils.ckpt_utils.CheckpointStrategy" title="data_juicer.utils.ckpt_utils.CheckpointStrategy"><span class="pre">CheckpointStrategy</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">CheckpointStrategy.EVERY_OP</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">checkpoint_n_ops</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">checkpoint_op_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/data_juicer/utils/ckpt_utils.html#RayCheckpointManager.__init__"><span class="viewcode-link"><span class="pre">[æºä»£ç ]</span></span></a><a class="headerlink" href="#data_juicer.utils.ckpt_utils.RayCheckpointManager.__init__" title="é“¾æ¥åˆ°æ­¤å®šä¹‰ã€‚">#</a></dt>
<dd><p>Initialize Ray checkpoint manager.</p>
<dl class="field-list simple">
<dt class="field-odd">å‚æ•°<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ckpt_dir</strong> -- Directory to save and load checkpoints</p></li>
<li><p><strong>checkpoint_enabled</strong> -- Whether checkpointing is enabled</p></li>
<li><p><strong>checkpoint_strategy</strong> -- Strategy for when to create checkpoints</p></li>
<li><p><strong>checkpoint_n_ops</strong> -- Number of operations between checkpoints (for EVERY_N_OPS strategy)</p></li>
<li><p><strong>checkpoint_op_names</strong> -- List of operation names to checkpoint (for MANUAL strategy)</p></li>
<li><p><strong>event_logger</strong> -- Optional event logger for checkpoint events</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_juicer.utils.ckpt_utils.RayCheckpointManager.resolve_checkpoint_filename">
<span class="sig-name descname"><span class="pre">resolve_checkpoint_filename</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">op_idx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">partition_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="../_modules/data_juicer/utils/ckpt_utils.html#RayCheckpointManager.resolve_checkpoint_filename"><span class="viewcode-link"><span class="pre">[æºä»£ç ]</span></span></a><a class="headerlink" href="#data_juicer.utils.ckpt_utils.RayCheckpointManager.resolve_checkpoint_filename" title="é“¾æ¥åˆ°æ­¤å®šä¹‰ã€‚">#</a></dt>
<dd><p>Resolve checkpoint filename using consistent format.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_juicer.utils.ckpt_utils.RayCheckpointManager.should_checkpoint">
<span class="sig-name descname"><span class="pre">should_checkpoint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">op_idx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">op_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="../_modules/data_juicer/utils/ckpt_utils.html#RayCheckpointManager.should_checkpoint"><span class="viewcode-link"><span class="pre">[æºä»£ç ]</span></span></a><a class="headerlink" href="#data_juicer.utils.ckpt_utils.RayCheckpointManager.should_checkpoint" title="é“¾æ¥åˆ°æ­¤å®šä¹‰ã€‚">#</a></dt>
<dd><p>Determine if checkpoint should be created based on configuration strategy.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_juicer.utils.ckpt_utils.RayCheckpointManager.save_checkpoint">
<span class="sig-name descname"><span class="pre">save_checkpoint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">op_idx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">op_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">partition_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cfg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="../_modules/data_juicer/utils/ckpt_utils.html#RayCheckpointManager.save_checkpoint"><span class="viewcode-link"><span class="pre">[æºä»£ç ]</span></span></a><a class="headerlink" href="#data_juicer.utils.ckpt_utils.RayCheckpointManager.save_checkpoint" title="é“¾æ¥åˆ°æ­¤å®šä¹‰ã€‚">#</a></dt>
<dd><p>Save dataset checkpoint to parquet format.</p>
<dl class="field-list simple">
<dt class="field-odd">å‚æ•°<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataset</strong> -- RayDataset or ray.data.Dataset to save</p></li>
<li><p><strong>op_idx</strong> -- Operation index</p></li>
<li><p><strong>op_name</strong> -- Operation name (optional)</p></li>
<li><p><strong>partition_id</strong> -- Partition ID</p></li>
<li><p><strong>cfg</strong> -- Optional config for RayDataset wrapper</p></li>
</ul>
</dd>
<dt class="field-even">è¿”å›<span class="colon">:</span></dt>
<dd class="field-even"><p>Path to saved checkpoint</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_juicer.utils.ckpt_utils.RayCheckpointManager.load_checkpoint">
<span class="sig-name descname"><span class="pre">load_checkpoint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">op_idx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">op_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">partition_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cfg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/data_juicer/utils/ckpt_utils.html#RayCheckpointManager.load_checkpoint"><span class="viewcode-link"><span class="pre">[æºä»£ç ]</span></span></a><a class="headerlink" href="#data_juicer.utils.ckpt_utils.RayCheckpointManager.load_checkpoint" title="é“¾æ¥åˆ°æ­¤å®šä¹‰ã€‚">#</a></dt>
<dd><p>Load dataset checkpoint from parquet format.</p>
<dl class="field-list simple">
<dt class="field-odd">å‚æ•°<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>op_idx</strong> -- Operation index</p></li>
<li><p><strong>op_name</strong> -- Operation name (optional)</p></li>
<li><p><strong>partition_id</strong> -- Partition ID</p></li>
<li><p><strong>cfg</strong> -- Optional config for RayDataset wrapper</p></li>
</ul>
</dd>
<dt class="field-even">è¿”å›<span class="colon">:</span></dt>
<dd class="field-even"><p>RayDataset or None if checkpoint doesn't exist</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_juicer.utils.ckpt_utils.RayCheckpointManager.find_latest_checkpoint">
<span class="sig-name descname"><span class="pre">find_latest_checkpoint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">partition_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/data_juicer/utils/ckpt_utils.html#RayCheckpointManager.find_latest_checkpoint"><span class="viewcode-link"><span class="pre">[æºä»£ç ]</span></span></a><a class="headerlink" href="#data_juicer.utils.ckpt_utils.RayCheckpointManager.find_latest_checkpoint" title="é“¾æ¥åˆ°æ­¤å®šä¹‰ã€‚">#</a></dt>
<dd><p>Find the latest checkpoint for a partition.</p>
<dl class="field-list simple">
<dt class="field-odd">å‚æ•°<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>partition_id</strong> -- Partition ID</p>
</dd>
<dt class="field-even">è¿”å›<span class="colon">:</span></dt>
<dd class="field-even"><p>Tuple of (op_idx, op_name, checkpoint_path) or None if no checkpoint found</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_juicer.utils.ckpt_utils.RayCheckpointManager.group_operations_for_checkpointing">
<span class="sig-name descname"><span class="pre">group_operations_for_checkpointing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ops</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/data_juicer/utils/ckpt_utils.html#RayCheckpointManager.group_operations_for_checkpointing"><span class="viewcode-link"><span class="pre">[æºä»£ç ]</span></span></a><a class="headerlink" href="#data_juicer.utils.ckpt_utils.RayCheckpointManager.group_operations_for_checkpointing" title="é“¾æ¥åˆ°æ­¤å®šä¹‰ã€‚">#</a></dt>
<dd><p>Group operations based on checkpoint strategy.</p>
<dl class="field-list simple">
<dt class="field-odd">å‚æ•°<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ops</strong> -- List of operations</p>
</dd>
<dt class="field-even">è¿”å›<span class="colon">:</span></dt>
<dd class="field-even"><p>List of (start_idx, end_idx, group_ops) tuples</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> å½“å‰é¡µé¢
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data_juicer.utils.ckpt_utils.CheckpointManagerBase"><code class="docutils literal notranslate"><span class="pre">CheckpointManagerBase</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#data_juicer.utils.ckpt_utils.CheckpointManagerBase.__init__"><code class="docutils literal notranslate"><span class="pre">CheckpointManagerBase.__init__()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#data_juicer.utils.ckpt_utils.CheckpointManagerBase.save_checkpoint"><code class="docutils literal notranslate"><span class="pre">CheckpointManagerBase.save_checkpoint()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#data_juicer.utils.ckpt_utils.CheckpointManagerBase.load_checkpoint"><code class="docutils literal notranslate"><span class="pre">CheckpointManagerBase.load_checkpoint()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#data_juicer.utils.ckpt_utils.CheckpointManagerBase.checkpoint_exists"><code class="docutils literal notranslate"><span class="pre">CheckpointManagerBase.checkpoint_exists()</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data_juicer.utils.ckpt_utils.CheckpointManager"><code class="docutils literal notranslate"><span class="pre">CheckpointManager</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#data_juicer.utils.ckpt_utils.CheckpointManager.__init__"><code class="docutils literal notranslate"><span class="pre">CheckpointManager.__init__()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#data_juicer.utils.ckpt_utils.CheckpointManager.get_left_process_list"><code class="docutils literal notranslate"><span class="pre">CheckpointManager.get_left_process_list()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#data_juicer.utils.ckpt_utils.CheckpointManager.check_ckpt"><code class="docutils literal notranslate"><span class="pre">CheckpointManager.check_ckpt()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#data_juicer.utils.ckpt_utils.CheckpointManager.record"><code class="docutils literal notranslate"><span class="pre">CheckpointManager.record()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#data_juicer.utils.ckpt_utils.CheckpointManager.check_ops_to_skip"><code class="docutils literal notranslate"><span class="pre">CheckpointManager.check_ops_to_skip()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#data_juicer.utils.ckpt_utils.CheckpointManager.save_ckpt"><code class="docutils literal notranslate"><span class="pre">CheckpointManager.save_ckpt()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#data_juicer.utils.ckpt_utils.CheckpointManager.save_checkpoint"><code class="docutils literal notranslate"><span class="pre">CheckpointManager.save_checkpoint()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#data_juicer.utils.ckpt_utils.CheckpointManager.load_ckpt"><code class="docutils literal notranslate"><span class="pre">CheckpointManager.load_ckpt()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#data_juicer.utils.ckpt_utils.CheckpointManager.load_checkpoint"><code class="docutils literal notranslate"><span class="pre">CheckpointManager.load_checkpoint()</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data_juicer.utils.ckpt_utils.CheckpointStrategy"><code class="docutils literal notranslate"><span class="pre">CheckpointStrategy</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#data_juicer.utils.ckpt_utils.CheckpointStrategy.EVERY_OP"><code class="docutils literal notranslate"><span class="pre">CheckpointStrategy.EVERY_OP</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#data_juicer.utils.ckpt_utils.CheckpointStrategy.EVERY_N_OPS"><code class="docutils literal notranslate"><span class="pre">CheckpointStrategy.EVERY_N_OPS</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#data_juicer.utils.ckpt_utils.CheckpointStrategy.MANUAL"><code class="docutils literal notranslate"><span class="pre">CheckpointStrategy.MANUAL</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#data_juicer.utils.ckpt_utils.CheckpointStrategy.DISABLED"><code class="docutils literal notranslate"><span class="pre">CheckpointStrategy.DISABLED</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data_juicer.utils.ckpt_utils.RayCheckpointManager"><code class="docutils literal notranslate"><span class="pre">RayCheckpointManager</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#data_juicer.utils.ckpt_utils.RayCheckpointManager.__init__"><code class="docutils literal notranslate"><span class="pre">RayCheckpointManager.__init__()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#data_juicer.utils.ckpt_utils.RayCheckpointManager.resolve_checkpoint_filename"><code class="docutils literal notranslate"><span class="pre">RayCheckpointManager.resolve_checkpoint_filename()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#data_juicer.utils.ckpt_utils.RayCheckpointManager.should_checkpoint"><code class="docutils literal notranslate"><span class="pre">RayCheckpointManager.should_checkpoint()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#data_juicer.utils.ckpt_utils.RayCheckpointManager.save_checkpoint"><code class="docutils literal notranslate"><span class="pre">RayCheckpointManager.save_checkpoint()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#data_juicer.utils.ckpt_utils.RayCheckpointManager.load_checkpoint"><code class="docutils literal notranslate"><span class="pre">RayCheckpointManager.load_checkpoint()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#data_juicer.utils.ckpt_utils.RayCheckpointManager.find_latest_checkpoint"><code class="docutils literal notranslate"><span class="pre">RayCheckpointManager.find_latest_checkpoint()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#data_juicer.utils.ckpt_utils.RayCheckpointManager.group_operations_for_checkpointing"><code class="docutils literal notranslate"><span class="pre">RayCheckpointManager.group_operations_for_checkpointing()</span></code></a></li>
</ul>
</li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>æœ¬é¡µ</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/api/data_juicer.utils.ckpt_utils.rst.txt"
            rel="nofollow">æ˜¾ç¤ºæºä»£ç </a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      Â© Copyright 2024, Data-Juicer Team.
      <br/>
    
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">

  <p class="sphinx-version">
    ç”± <a href="https://www.sphinx-doc.org/">Sphinx</a> 9.0.4åˆ›å»ºã€‚
    <br/>
  </p>
</div>
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  ä½¿ç”¨ <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1æ„å»º.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>